<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link href="css/shouhuodizhi.css" rel="stylesheet" type="text/css">
		<script type="text/javascript" src="js/nui.js"></script>
		<style type="text/css">
			* {
				margin: 0px;
				padding: 0px;
			}
			
			body {
				background: #eeeeee;
				min-width: 1250px;
			}
		</style>
	</head>

	<body>
		<div align="center">
			<div class="headwordback">
				<div class="headword">
					<a href="#" target="_blank">欢迎来到商城</a>
					<a href="#" target="_blank">登录/注册</a>
					<a href="#" target="_blank">我的订单</a>
					<a href="#" target="_blank">购物车</a>
					<a href="#" target="_blank">联系客服</a>
					<a href="#" target="_blank">商城指南</a>
					<a href="#" target="_blank">手机商城</a>
				</div>
			</div>
			<div class="headerTop">
				<div class="headerContent">
					<div class="icon" onclick="javascript:void();">
						<div>
							<img src="img/qb/icon.png" width="60" height="60">
						</div>
						<span id="userName">super</span>
					</div>
					<div class="headerList">
						<div>首页</div>
						<div>账户设置</div>
						<div>消息</div>
					</div>
					<div class="search">
						<div></div>
						<div id="key1" class="key1">多人通话软碟通</div>
						<div><input onfocus="var key1=document.getElementById('key1'); key1.style.display='none';" onblur="if(this.value!='')key1.style.display='none'; else key1.style.display='';" type="text" name="" id="" value="" /></div>
						<div class="icon"><img src="img/searchlogo.png" /></div>
						<div><input type="button" value="搜索"></div>
					</div>
				</div>
			</div>
			<div class="bodyContent">
				<div class="shdzTitle">收货地址</div>
				<div class="shdzlist">
					<div class="shdzlistTitle">
						<div class="t_1">区域</div>
						<div class="t_2">详细地址</div>
						<div class="t_3">邮编</div>
						<div class="t_4">收货人</div>
						<div class="t_5">电话</div>
						<div class="t_6">操作</div>
						<div class="t_7">默认</div>
					</div>
					<div class="shdzlistContent">
						<div class="c_1"><span>区域</span></div>
						<div class="c_2"><span>详细地址详细地址详细地址详细详细地址详细地址详细地址详细</span></div>
						<div class="c_3"><span>邮编</span></div>
						<div class="c_4"><span>收货人</span></div>
						<div class="c_5"><span>电话</span></div>
						<div class="c_6">
							<a href="#" target="_blank">删除</a> |
							<a href="#" target="_blank">修改</a>
						</div>
						<div class="c_7">
							<a href="#" target="_blank">默认地址</a>
						</div>
					</div>
				</div>
				<div class="addAddress">
					<div class="newaddress">新建地址 +</div>
					<div  class="addressItems">
						<div>
							<div>*</div>
							<div>地址信息:</div>
							<div><input id="addresstxt" type="text" placeholder="请输入省份/市区/区域/街道" /></div>
						</div>
						<div>
							<div>*</div>
							<div>详细地址:</div>
							<div><input id="addressdetailtxt" type="text" placeholder="请输入详细地址" /></div>
						</div>
						<div>
							<div></div>
							<div>邮政编码:</div>
							<div><input id="post" type="text" placeholder="请输入邮政编码" /></div>
						</div>
						<div>
							<div>*</div>
							<div>收 货 人 :</div>
							<div><input id="consignee" type="text" placeholder="请输入收货人姓名" /></div>
						</div>
						<div>
							<div>*</div>
							<div>手机号码:</div>
							<div><input id="phone" type="text" placeholder="+86" /></div>
						</div>
						<div>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<div id="defconsignee"></div>
							<div class="setdef">设为默认收货地址</div>
							<div></div>
						</div>
						<div>
							<div></div>
							<div></div>
							<div><input onclick="saveAddress();" type="button" value="保存" /></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
			var defcb = new Ncheckbox(document.getElementById("defconsignee"), [14, 14], ["img/ui/z1_m.png", "img/ui/z1_x.png"]);

			var dlist = document.getElementById("dlist");

			var addressData = [{
				"id": "1",
				"name": "王小明",
				"address": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"addresstxt": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"post": "01001",
				"phone": "186 7234 5467",
				"defconsignee": "1",
			}, {
				"id": "2",
				"name": "王小明",
				"address": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"addresstxt": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"post": "01001",
				"phone": "186 7234 5467",
				"defconsignee": "1",
			}, {
				"id": "3",
				"name": "王小明",
				"address": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"addresstxt": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"post": "01001",
				"phone": "186 7234 5467",
				"defconsignee": "1",
			}, {
				"id": "4",
				"name": "王小明",
				"address": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"addresstxt": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"post": "01001",
				"phone": "186 7234 5467",
				"defconsignee": "1",
			}, {
				"id": "5",
				"name": "王小明",
				"address": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"addresstxt": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"post": "01001",
				"phone": "186 7234 5467",
				"defconsignee": "1",
			}, {
				"id": "6",
				"name": "王小明",
				"address": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"addresstxt": "北京市朝阳区百子湾街道金长安大厦c座2702室5",
				"post": "01001",
				"phone": "186 7234 5467",
				"defconsignee": "1",
			}];

			function initAddressData(isdef) {

				while(dlist.children.length > 0)
					dlist.removeChild(dlist.firstChild);

				let cdata = '';
				for(let i = 0; i < addressData.length; i++) {

					if(i == 0 && (!currentselectData || (currentselectData && currentselectData.id == addressData[i].id)))
						cdata += '<div cid="' + addressData[i].id + '" class="selectedState defauleState">';
					else if(i == 0)
						cdata += '<div cid="' + addressData[i].id + '" class="defauleState">';
					else if(currentselectData && currentselectData.id == addressData[i].id)
						cdata += '<div cid="' + addressData[i].id + '" class="selectedState">';
					else
						cdata += '<div cid="' + addressData[i].id + '">';

					cdata += '	<div>' + addressData[i].address + '</div>'
					cdata += '	<hr />'
					cdata += '	<div>'
					cdata += '		<div>' + addressData[i].name + '</div>'
					cdata += '		<div>' + addressData[i].phone + '</div>'
					cdata += '	</div>'
					cdata += '</div>'
				}

				cdata += '<div onclick="openDialog();">'
				cdata += '	<div><img src="img/jiesuang/组12.png" /></div>'
				cdata += '</div>'

				dlist.innerHTML = cdata;

				for(let i = 0; i < dlist.children.length - 1; i++) {
					dlist.children[i].addEventListener("click", selectTab);
				}

			}

			initAddressData();

			var currentselectData;

			function selectTab(e) {

				let nopic = false;

				for(let i = 0; i < dlist.children.length; i++) {
					if(i == 0) {
						dlist.children[i].className = "defauleState";
						nopic = dlist.children[i] == e.target;
					} else
						dlist.children[i].className = "";

					if(dlist.children[i].getAttribute("cid") == e.target.getAttribute("cid"))
						currentselectData = addressData[i];
				}

				if(nopic) {
					e.target.className = "selectedState";
				} else
					e.target.className = "selectedNoPicState";
			}

			function closeDialog() {
				document.getElementById("model").style.display = 'none';
				document.getElementById("address").style.display = 'none';

				initAddressData();
			}

			function openDialog() {
				document.getElementById("model").style.display = '';
				document.getElementById("address").style.display = '';

				document.getElementById("addresstxt").value = "";
				document.getElementById("addressdetailtxt").value = "";
				document.getElementById("phone").value = "";
				document.getElementById("post").value = "";
				document.getElementById("consignee").value = "";
				defcb.setChecked(false);
			}

			/**
			 * 管理地址
			 */
			function updateDialog() {
				document.getElementById("model").style.display = '';
				document.getElementById("address").style.display = '';

				document.getElementById("addresstxt").value = "" + currentselectData.address;
				document.getElementById("addressdetailtxt").value = "" + currentselectData.address;
				document.getElementById("phone").value = "" + currentselectData.phone;
				document.getElementById("post").value = "" + currentselectData.post;
				document.getElementById("consignee").value = "" + currentselectData.name;
				//document.getElementById("defconsignee").value = "" + currentselectData.defconsignee;
				defcb.setChecked(eval(currentselectData.defconsignee));
			}

			/**
			 * 保存地址
			 */
			function saveAddress() {

				currentselectData.address = document.getElementById("addresstxt").value;
				currentselectData.addresstxt = document.getElementById("addressdetailtxt").value;
				currentselectData.phone = document.getElementById("phone").value;
				currentselectData.post = document.getElementById("post").value;
				currentselectData.name = document.getElementById("consignee").value;
				currentselectData.defconsignee = (defcb.getChecked() ? 1 : 0);

				for(let i = 0; i < addressData.length; i++) {
					if(addressData[i].id == currentselectData.id) {
						addressData[i] = currentselectData;
					}
				}
			}
		</script>

	</body>

</html>